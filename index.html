<script>
const input = document.getElementById("input");
const chat = document.getElementById("chat");

function poprawTekstCalosciowo(text) {
  if (!text) return "";

  // prosta normalizacja
  let t = text.trim();

  // wielka litera na poczÄ…tku
  t = t.charAt(0).toUpperCase() + t.slice(1);

  // znak zapytania dla pytaÅ„
  if (/^(jak|co|czy|dlaczego|kiedy)/i.test(t) && !/[?.!]$/.test(t)) {
    t += "?";
  }

  return t;
}

function odpowiedzLogicznie(text) {
  const lower = text.toLowerCase();

  if (lower.includes("jak siÄ™ masz")) {
    return "Mam siÄ™ dobrze ğŸ™‚ A jak mogÄ™ Ci pomÃ³c?";
  }

  if (lower.includes("Å›wietnie") || lower.includes("dobrze")) {
    return "Super! ğŸ‘ Co chciaÅ‚byÅ› zrobiÄ‡ dalej?";
  }

  return "Rozumiem. Opowiedz proszÄ™ wiÄ™cej ğŸ™‚";
}

function send() {
  if (!input.value.trim()) return;

  const original = input.value;
  const poprawiony = poprawTekstCalosciowo(original);

  chat.innerHTML += `<div class="msg user">&gt; ${original}</div>`;
  chat.innerHTML += `<div class="msg fixed">âœ“ Poprawiona pisownia:<br>${poprawiony}</div>`;

  const reply = odpowiedzLogicznie(poprawiony);
  chat.innerHTML += `<div class="msg ai">ğŸ¤– ${reply}</div>`;

  input.value = "";
  chat.scrollTop = chat.scrollHeight;
}
</script>
